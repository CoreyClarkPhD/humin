{"version":3,"sources":["./src/app/rete-modules/custom-rete.module.ts","./src/app/rete-modules/nodes/controls/resource-control/resource-control.ts","./src/app/rete-modules/nodes/controls/resource-control/resource-control.html","./src/environments/environment.ts","./src/app/rete-modules/nodes/resource-node.component.ts","./src/app/rete-modules/services/fake-item.service.ts","./src/app/rete-modules/nodes/crafter-node.component.ts","./src/app/rete-modules/grid/grid.component.ts","./src/app/rete-modules/grid/grid.component.html","./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/app/rete-modules/nodes/output-node.component.ts","./src/app/rete-modules/shared/item.model.ts","./src/app/rete-modules/shared/connection.model.ts","./src/app/rete-modules/shared/node-tree.ts","./src/app/rete-modules/nodes/base-node/base-node.component.ts","./src/app/rete-modules/nodes/base-node/base-node.component.html","./src/app/rete-modules/nodes/sockets.ts","./src/app/rete-modules/services/item.service.ts","./src/main.ts","./$_lazy_route_resource lazy namespace object"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["import { FakeItemService } from './services/fake-item.service';\nimport { ItemService } from 'src/app/rete-modules/services/item.service';\nimport { ResourceComponent } from './nodes/controls/resource-control/resource-control';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { GridComponent } from './grid/grid.component';\nimport { ReteModule } from 'rete-angular-render-plugin';\nimport { BaseNodeComponent } from './nodes/base-node/base-node.component';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations'\n\n@NgModule({\n  declarations: [GridComponent, BaseNodeComponent, ResourceComponent],\n  imports: [\n    BrowserAnimationsModule,\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    ReteModule\n  ],\n  providers: [{ provide: ItemService, useClass: FakeItemService} ],\n  exports: [GridComponent],\n  entryComponents: [ResourceComponent, BaseNodeComponent]\n})\nexport class CustomReteModule { }\n","import { ItemFilter, ItemService } from './../../../services/item.service';\nimport { Item } from './../../../shared/item.model';\n\nimport { Component, Input, Type } from '@angular/core';\nimport { Control, Node, NodeEditor } from 'rete';\nimport { AngularControl } from 'rete-angular-render-plugin';\n\n@Component({\n  templateUrl: \"./resource-control.html\",\n  styleUrls: [\"./resource-control.sass\",]\n})\nexport class ResourceComponent {\n  @Input() selectedItem!: Item;\n  @Input() craftable!: ItemFilter;\n  @Input() perHour!: number;\n  @Input() perHourString: string;\n  @Input() readonly!: boolean;\n  @Input() mounted!: Function;\n  @Input() changeItem!: Function;\n  @Input() changeRate!: Function;\n  @Input() click!: Function;\n  @Input() mouseDown!: Function;\n  @Input() mouseUp!: Function;\n  items: Item[];\n\n\n  public background: any;\n\n  constructor(private itemService: ItemService) {\n    this.background = new Object();\n  }\n  \n  ngOnInit() {\n    if (this.craftable === ItemFilter.ANY) {\n      this.items = this.itemService.GetAllItems();\n    }\n    else if (this.craftable === ItemFilter.CRAFTABLE)\n    {\n      this.items = this.itemService.GetAllCraftableItems();\n    }\n    else if (this.craftable === ItemFilter.NON_CRAFTABLE)\n    {\n      this.items = this.itemService.GetAllNonCraftableItems();\n    }\n\n    this.selectedItem = this.items[0];\n\n    this.updateVisual();\n    this.mounted( this.selectedItem, 1 );\n  }\n\n  onChange() {\n    this.changeItem(this.selectedItem);\n    this.updateVisual();\n  }\n\n  onChangeRate() {\n    let num = parseFloat(this.perHourString);\n\n    this.perHour = num;\n    this.changeRate(this.perHour);\n  }\n\n  updateVisual() {\n    this.background['background-position-x'] = -64 * this.selectedItem.index[0] + \"px\";\n    this.background['background-position-y'] =  -64 * this.selectedItem.index[1] + \"px\";\n  }\n}\n\nexport class ResourceControl extends Control implements AngularControl {\n  component: Type<ResourceComponent>\n  props: { [key: string]: unknown }\n  \n  constructor(public emitter: NodeEditor, public key, craftable: ItemFilter) {\n    super(key); \n  \n    this.component = ResourceComponent;\n    this.props = {\n      selectedItem: Item,\n      craftable: craftable,\n      readonly: false,\n      perHour: 1,\n      perHourString: \"1\",\n      changeItem: v => this.onChangeItem(v),\n      changeRate: v => this.onChangeRate(v),\n      mounted: (item: Item, rate: number) => {\n        this.setItemValue(item);\n        this.setRate(rate);\n      },\n      click: () => this.onClick(),\n      mouseDown: () => this.onMouseDown(),\n      mouseUp: () => this.onMouseUp(),\n    }\n  }\n\n  onChangeItem(item: Item) {\n    this.setItemValue(item);\n    this.emitter.trigger('process');\n  }\n\n  setItemValue(item: Item) {\n    this.props.selectedItem = item;\n    this.putData(this.key, this.props.selectedItem);\n\n    this.putData('amount', (item.hasOwnProperty('createdAmount') ? item.createdAmount : 1));\n    this.putData('changed', true);\n  }\n\n  onChangeRate(rate: number) {\n    this.setRate(rate);\n\n    this.emitter.trigger('process');\n  }\n\n  setRate(rate: number) {\n    this.props.perHour = rate;\n\n    let str = rate == Infinity ? \"-\" : rate.toString();\n    if (str.indexOf('.') !== -1) {\n      str = str.slice(0, str.indexOf('.') + 3);\n    }\n    this.props.perHourString = str;\n\n    this.putData('perHour', rate);\n  }\n\n  onClick() {\n    this.emitter.selected.clear();\n    this.emitter.nodes.map(n => n.update());\n  }\n\n  onMouseDown() {\n    this.emitter.selected.clear();\n    this.emitter.nodes.map(n => n.update());\n  }\n\n  onMouseUp() {\n    this.emitter.selected.clear();\n    this.emitter.nodes.map(n => n.update());\n  }\n}","<div class=\"resource-control\">\n    <div class=\"center\">\n        <img class=\"item\" src=\"assets/images/transparent_32x32.png\" [ngStyle]=\"background\" (dragstart)=\"false\">\n    </div>\n    <div (mousedown)=\"this.mouseDown()\" (mouseup)=\"this.mouseUp()\">\n        <select [(ngModel)]=\"selectedItem\" (change)=\"onChange()\">\n            <option *ngFor=\"let value of items\" [ngValue]=\"value\" >{{value.id}} - {{value.name}}</option>\n        </select>\n    </div>\n\n    <div>\n        <input type=\"text\" oninput=\"this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\\..*)\\./g, '$1');\" \n        [(ngModel)]=\"perHourString\"\n        [readonly]=\"readonly\" \n        placeholder=\"1\"  \n        (change)=\"onChangeRate()\"\n        (dblclick)=\"$event.stopPropagation()\" \n        (mousedown)=\"this.mouseDown()\" \n        (mouseup)=\"this.mouseUp()\" >\n        / hour\n    </div>\n</div>","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { Connection } from './../shared/connection.model';\nimport { ItemFilter } from './../services/item.service';\nimport { Component, Output, Input } from 'rete';\nimport { SocketController } from './sockets';\nimport { ResourceControl } from './controls/resource-control/resource-control';\n\nexport class ResourceNode extends Component {\n\n  constructor(private socketController: SocketController) {\n    super('Resource');\n  }\n\n  builder(node) {\n    var control = new ResourceControl(this.editor, 'resource', ItemFilter.NON_CRAFTABLE\n    );\n    node.addControl(control);\n\n    node.data['type'] = 'output';\n\n    return node;\n  }\n\n  worker(node, inputs, outputs) {\n\n    var node_ref = this.editor.nodes.find(n => n.id === node.id);\n\n    if (node.data.changed === true)\n    {\n      node_ref.getConnections().forEach(element => {\n        this.editor.removeConnection(element);\n      });\n      \n      node_ref.outputs.clear();\n      var item = node.data.resource;\n\n      var output = new Output(\"resource\", item.name, this.socketController.GetSocketForId(item.id));\n      node_ref.addOutput(output);\n      \n      this.editor.trigger('nodeselected');\n\n      node.data.changed = false;\n    }\n\n    let datagram = new Connection(node.data.resource, node.data.amount, node.data.perHour);\n    outputs['resource'] = datagram;\n  }\n}","import { Injectable } from '@angular/core';\nimport { ItemService } from 'src/app/rete-modules/services/item.service';\nimport { Item } from './../shared/item.model';\n\nvar fakeDatabase = {\n  \"items\": [\n    {\n      \"id\": 1,\n      \"name\": \"Stone\",\n      \"index\": [0, 0],\n      \"craftable\": false,\n    },\n    {\n      \"id\": 2,\n      \"name\": \"Grass\",\n      \"index\": [1, 0],\n      \"craftable\": false,\n    },\n    {\n      \"id\": 3,\n      \"name\": \"Dirt\",\n      \"index\": [2, 0],\n      \"craftable\": false,\n    },\n    {\n      \"id\": 4,\n      \"name\": \"Cobblestone\",\n      \"index\": [3, 0],\n      \"craftable\": false,\n    },\n    {\n      \"id\": 5,\n      \"name\": \"Planks\",\n      \"index\": [4, 0],\n      \"craftable\": true,\n      \"createdAmount\": 4,\n      \"recipe\": [\n        {\n          \"id\": 23,\n          \"amount\":1\n        },\n      ],\n    },\n    {\n      \"id\": 23,\n      \"name\": \"Logs\",\n      \"index\": [6, 1],\n      \"craftable\": false,\n    },\n    {\n      \"id\": 92,\n      \"name\": \"Bookshelf\",\n      \"index\": [11, 5],\n      \"craftable\": true,\n      \"createdAmount\": 1,\n      \"recipe\": [\n        {\n          \"id\": 340,\n          \"amount\":3\n        },\n        {\n          \"id\": 5,\n          \"amount\": 6\n        }\n      ],\n    },\n    {\n      \"id\": 103,\n      \"name\": \"Crafting Bench\",\n      \"index\": [6, 6],\n      \"craftable\": true,\n      \"createdAmount\": 1,\n      \"recipe\": [\n        {\n          \"id\": 5,\n          \"amount\":4\n        },\n      ],\n    },\n    {\n      \"id\": 334,\n      \"name\": \"Leather\",\n      \"index\": [14, 18],\n      \"craftable\": false,\n    },\n    {\n      \"id\": 338,\n      \"name\": \"Sugar Cane\",\n      \"index\": [2, 19],\n      \"craftable\": false,\n    },\n    {\n      \"id\": 339,\n      \"name\": \"Paper\",\n      \"index\": [3, 19],\n      \"craftable\": true,\n      \"createdAmount\": 3,\n      \"recipe\": [\n        {\n          \"id\": 338,\n          \"amount\":3\n        },\n      ],\n    },\n    {\n      \"id\": 340,\n      \"name\": \"Book\",\n      \"index\": [4, 19],\n      \"craftable\": true,\n      \"createdAmount\": 1,\n      \"recipe\": [\n        {\n          \"id\": 334,\n          \"amount\":1\n        },\n        {\n          \"id\": 339,\n          \"amount\": 3\n        }\n      ],\n    },\n  ]\n};\n\n@Injectable()\nexport class FakeItemService extends ItemService {\n  constructor() { \n    super()\n  }\n\n  GetAllItems(): Item[] {\n    return fakeDatabase[\"items\"] as Item[];\n  }\n\n  GetItemFromId(id: number): Item {\n    return fakeDatabase[\"items\"].find((value) => {\n      if (value.id === id) { return value as Item};\n    })\n  }\n\n  GetAllCraftableItems(): Item[] {\n    return fakeDatabase[\"items\"].filter( value => {\n      return value.craftable;\n    })\n  }\n\n  GetAllNonCraftableItems(): Item[] {\n    return fakeDatabase[\"items\"].filter(value => {\n      return !value.craftable;\n    })\n  }\n}\n","import { Connection } from './../shared/connection.model';\nimport { SocketController } from './sockets';\nimport { ItemService } from 'src/app/rete-modules/services/item.service';\nimport { ItemFilter } from './../services/item.service';\nimport { Component, Output, Input, Socket } from 'rete';\nimport { ResourceControl } from './controls/resource-control/resource-control';\nimport { NgControlStatus } from '@angular/forms';\n\nexport class CrafterNode extends Component {\n\n  constructor(private socketController: SocketController, private itemService: ItemService) {\n    super('Crafter');\n  }\n\n  builder(node) {\n    var control = new ResourceControl(this.editor, 'resource', ItemFilter.CRAFTABLE\n    );\n    node.addControl(control);\n\n    return node;\n  }\n\n  worker(node, inputs, outputs) {\n\n    var node_ref = this.editor.nodes.find(n => n.id === node.id);\n\n    if (node.data.changed === true)\n    {\n      node_ref.getConnections().forEach(element => {\n        this.editor.removeConnection(element);\n      });\n      \n      node_ref.outputs.clear();\n      var item = node.data.resource;\n      var output = new Output(\"resource\", item.name  + \" x \" + item.createdAmount, this.socketController.GetSocketForId(item.id));\n      node_ref.addOutput(output);\n\n      node_ref.inputs.clear();\n      item.recipe.forEach(element => {\n        var item = this.itemService.GetItemFromId(element.id);\n        var input = new Input(\"\" + item.id, item.name + \" x \" + element.amount , this.socketController.GetSocketForId(item.id));\n        node_ref.addInput(input);\n      });\n\n      this.editor.trigger('nodeselected');\n      // this.editor.trigger('nodecreated');\n\n      node.data.changed = false;\n    }\n\n    var perHourBottleneck = Infinity;\n    var craftedItem = node.data.resource;\n    for (var recipeIndex in craftedItem.recipe) {\n      let item = craftedItem.recipe[recipeIndex];\n      let input = inputs[item.id];\n\n      // Input found\n      if (input && input[0]) {\n        let itemBottleneck = input[0].amount / item.amount;\n        itemBottleneck *= input[0].perHour;\n\n        if (itemBottleneck < perHourBottleneck) {\n          perHourBottleneck = itemBottleneck;\n        }\n      }\n    }\n\n    let control = <ResourceControl>node_ref.controls.get('resource');\n    control.props.readonly = true;\n    control.setRate(perHourBottleneck);\n      \n    var datagram = new Connection(node.data.resource, node.data.amount, node.data.perHour);\n    outputs['resource'] = datagram;\n  }\n}","import { NodeTree } from './../shared/node-tree';\nimport { OutputNode } from './../nodes/output-node.component';\nimport { ItemService } from './../services/item.service';\nimport { CrafterNode } from './../nodes/crafter-node.component';\nimport { SocketController } from './../nodes/sockets';\nimport { Component, AfterViewInit, ViewChild, ElementRef } from '@angular/core';\n\nimport { NodeEditor, Engine } from 'rete';\nimport ConnectionPlugin from 'rete-connection-plugin';\n\nimport { ResourceNode } from './../nodes/resource-node.component';\nimport { AngularRenderPlugin } from 'rete-angular-render-plugin';\n\n@Component({\n  selector: 'app-grid',\n  templateUrl: './grid.component.html',\n  styleUrls: ['./grid.component.sass']\n})\nexport class GridComponent implements AfterViewInit {\n  \n  @ViewChild('nodeEditor', { static: true }) private el: ElementRef;\n  private editor = null;\n  private engine: Engine;\n\n  private nodeTree: NodeTree;\n\n  constructor(private socketController: SocketController, private itemService: ItemService) { \n  }\n\n  async ngAfterViewInit() {\n    const container = this.el.nativeElement;\n    \n    const components = [new ResourceNode(this.socketController), new CrafterNode(this.socketController, this.itemService), new OutputNode(this.socketController) ];\n    \n    this.editor = new NodeEditor('minecraft-web-app@0.1.0', container);\n    this.editor.use(ConnectionPlugin);\n    this.editor.use(AngularRenderPlugin);\n\n    this.engine = new Engine('minecraft-web-app@0.1.0');\n\n    this.nodeTree = new NodeTree();\n\n    components.map(c => {\n      this.editor.register(c);\n      this.engine.register(c);\n    });\n\n    const testNode1 = await components[0].createNode();\n    const testNode2 = await components[0].createNode();\n    const testNode3 = await components[0].createNode();\n    const testNode4 = await components[0].createNode();\n    const crafterNode1 = await components[1].createNode();\n    const crafterNode2 = await components[1].createNode();\n    const crafterNode3 = await components[1].createNode();\n    const crafterNode4 = await components[1].createNode();\n    const outputNode = await components[2].createNode();\n\n    testNode1.position = [0, 100];\n    testNode2.position = [0, 400];\n    testNode3.position = [0, 700];\n    testNode4.position = [0, 1000];\n    crafterNode1.position = [300, 100];\n    crafterNode2.position = [300, 400];\n    crafterNode3.position = [300, 700];\n    crafterNode4.position = [300, 1000];\n    outputNode.position = [600, 100];\n\n\n    this.editor.addNode(testNode1);\n    this.editor.addNode(testNode2);\n    this.editor.addNode(testNode3);\n    this.editor.addNode(testNode4);\n    this.editor.addNode(crafterNode1);\n    this.editor.addNode(crafterNode2);\n    this.editor.addNode(crafterNode3);\n    this.editor.addNode(crafterNode4);\n    this.editor.addNode(outputNode);\n\n    this.editor.on(['process', 'nodecreated', 'noderemoved', 'connectioncreated', 'connectionremoved'], (async () => {\n      await this.engine.abort();\n      await this.engine.process(this.editor.toJSON());\n    }) as any);\n\n    this.editor.on(['process', 'connectioncreated'], () => {\n      this.nodeTree.parseFromJson(this.editor.toJSON());\n      console.log(this.nodeTree.getCriticalPath());\n    });\n\n    this.editor.on('click', () => {\n      this.editor.selected.clear();\n      this.editor.nodes.map(n => n.update());\n    })\n\n    this.engine.on('error', (message) => {\n      console.log(message);\n    });\n    \n    this.editor.view.resize();\n    this.editor.trigger('process');\n  }\n\n}\n","<div class=\"grid-wrapper\">\n    <div #nodeEditor class=\"node-editor\"></div>\n</div>","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.sass']\n})\nexport class AppComponent {\n  title = 'Supplemental Application';\n\n  onClick(event) {\n    console.log(\"Clicked: \" + event);\n  }\n}\n","<h1>{{ title }}</h1>\n<app-grid></app-grid>","import { SocketController } from './rete-modules/nodes/sockets';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\n\nimport { AppComponent } from './app.component';\nimport { CustomReteModule } from './rete-modules/custom-rete.module';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations'\n\n@NgModule({\n  declarations: [\n    AppComponent,\n  ],\n  imports: [\n    BrowserModule,\n    BrowserAnimationsModule,\n    CustomReteModule\n  ],\n  providers: [SocketController],\n  bootstrap: [AppComponent]\n})\nexport class AppModule {}\n\n","import { ItemFilter } from './../services/item.service';\nimport { Component, Output, Input } from 'rete';\nimport { SocketController } from './sockets';\nimport { ResourceControl } from './controls/resource-control/resource-control';\n\nexport class OutputNode extends Component {\n\n  constructor(private socketController: SocketController) {\n    super('Output');\n  }\n\n  builder(node) {\n    var control = new ResourceControl(this.editor, 'resource', ItemFilter.ANY);\n    control.props.readonly = true;\n    node.addControl(control);\n\n    return node;\n  }\n\n  worker(node, inputs, outputs) {\n\n    var node_ref = this.editor.nodes.find(n => n.id === node.id);\n\n    if (node.data.changed === true)\n    {\n      node_ref.getConnections().forEach(element => {\n        this.editor.removeConnection(element);\n      });\n      \n      node_ref.inputs.clear();\n      var item = node.data.resource;\n\n      var input = new Input(\"resource\", item.name, this.socketController.GetSocketForId(item.id));\n      node_ref.addInput(input);\n      \n      this.editor.trigger('nodeselected');\n\n      node.data.changed = false;\n    }\n\n    var perHourBottleneck = Infinity;\n\n    if (inputs && inputs['resource'] && inputs['resource'][0]) {\n      perHourBottleneck = inputs['resource'][0].perHour;\n    }\n\n    let control = <ResourceControl>node_ref.controls.get('resource');\n    control.props.readonly = true;\n    control.setRate(perHourBottleneck);\n  }\n}","import { RecipeComponent } from './recipe.model';\n\nexport class Item {\n  public id!: number;\n  public name!: string;\n  public index: any;\n  public craftable: boolean;\n  public createdAmount?: number;\n  public recipe?: RecipeComponent[];\n\n  constructor(id: number, name: string) {\n    this.id = id;\n    this.name = name;\n  }\n}","import { Item } from './item.model';\n\nexport class Connection {\n  public item!: Item;\n  public amount!: number;\n  public perHour!: number;\n\n  constructor(item: Item, amount: number, perHour: number) {\n    this.item = item;\n    this.amount = amount;\n    this.perHour = perHour;\n  }\n}","class TreeItem {\n  public node: any;\n  public inputs: any[];\n  public outputs: any[];\n\n  constructor(node: any) {\n    this.node = node;\n\n    this.inputs = [];\n    this.outputs = [];\n  }\n\n  getNodeId(): number {\n    return this.node['id'];\n  }\n\n  getNodeName(): string {\n    return this.node['name'];\n  }\n\n  getNodeData(): object {\n    return this.node['data'];\n  }\n}\n\nexport class NodeTree {\n  public outputNodes: TreeItem[] = [];\n  public criticalPath: any[] = [];\n\n  private allConnectedNodes = []; \n\n  parseFromJson(json: object) {\n    this.outputNodes = [];\n    this.allConnectedNodes = json['nodes'];\n\n    let nodes: object[] = [];\n    // Start with finding all of the output nodes\n    for (const nodeIndex in json['nodes']) {\n      const node = json['nodes'][nodeIndex];\n\n      if (node['name'] === \"Output\") {\n        nodes.push(node);\n      }\n    }\n\n    nodes.forEach((value, index, array) => {\n      this.outputNodes.push(this.findOrCreate(value));\n    });\n\n    let searchStack: TreeItem[] = [];\n    this.outputNodes.forEach((treeNode, index, array) => {\n      searchStack.push(treeNode);\n    });\n    \n    while (searchStack.length > 0) {\n      const currentNode: TreeItem = searchStack.pop();\n\n      for (const inputIndex in currentNode.node.inputs) {\n        const input = currentNode.node.inputs[inputIndex];\n\n        if (input['connections'] && input['connections'].length > 0) {\n          let newNode = this.allConnectedNodes[input['connections'][0]['node']];\n          searchStack.push(this.addNode(newNode, currentNode));\n        }\n      }\n    }\n\n    this.calculateCriticalPath();\n  }\n\n  getCriticalPath(): any[] {\n    return this.criticalPath;\n  }\n\n  private calculateCriticalPath() {\n    this.criticalPath = [];\n\n    let currentNode: TreeItem = null;\n    this.outputNodes.forEach((value, index, array) => {\n      if (currentNode == null) {\n        currentNode = value;\n      }\n      else if (currentNode.getNodeData()['perHour'] > value.getNodeData()['perHour']) {\n        currentNode = value;\n      }\n    });\n\n    if (currentNode === null) {\n      return;\n    }\n\n    let nextNode = currentNode;\n    this.criticalPath.push(nextNode.node);\n    while (nextNode.getNodeName() !== 'Resource') {\n\n      currentNode = null;\n      nextNode.inputs.forEach((value, index, array) => {\n        if (currentNode === null) {\n          currentNode = value;\n        } else if (currentNode.getNodeData()['perHour'] > value.getNodeData()['perHour']) {\n          currentNode = value;\n        } \n      });\n\n      if (currentNode === null) {\n        return;\n      }\n\n      this.criticalPath.push(currentNode.node);\n      nextNode = currentNode;\n    }\n  }\n\n  private addNode(node: any, parent: TreeItem): TreeItem {\n    let child = this.findOrCreate(node);\n    child.outputs.push(parent);\n\n    parent.inputs.push(child);\n\n    return child;\n  }\n\n  private findOrCreate(node: any): TreeItem {\n    let item = null;\n    this.outputNodes.forEach((value, index, array) => {\n      let stack: TreeItem[] = [];\n      stack.push(value);\n\n      while (stack.length > 0) {\n        let popped = stack.pop();\n        if (popped.node['id'] == node['id']) {\n          item = popped;\n          return;\n        }\n\n        popped.inputs.forEach((value, index, array) => {\n          stack.push(value);\n        });\n      }\n    });\n\n    if( item !== null) {\n      return item;\n    }\n    return new TreeItem(node);\n  }\n}","import { ChangeDetectionStrategy, ChangeDetectorRef, Component } from '@angular/core';\nimport { NodeComponent, NodeService } from 'rete-angular-render-plugin';\n\n@Component({\n  selector: 'app-base-node',\n  templateUrl: './base-node.component.html',\n  styleUrls: ['./base-node.component.sass'],\n  providers: [NodeService],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\n  \nexport class BaseNodeComponent extends NodeComponent {\n  constructor(protected service: NodeService, protected cdr: ChangeDetectorRef) {\n    super(service, cdr);\n   }\n}\n","<p>base-node works!</p>\n\n<div class=\"base-node\" [ngClass]=\"[selected(), node.name] | kebab\">\n    <div class=\"node-title\">{{node.name}}</div>\n    <div class=\"output\" *ngFor=\"let output of outputs\">\n        <div class=\"output-title\">{{output.name}}</div>\n        <rete-socket rete-socket [io]=\"output\" [socket]=\"output.socket\"></rete-socket>\n    </div>\n    <div class=\"control\" *ngFor=\"let control of controls\" [rete-control]=\"control\"></div>\n    <div class=\"input\" *ngFor=\"let input of inputs\">\n        <rete-socket rete-socket [io]=\"input\" [socket]=\"input.socket\"></rete-socket>\n        <div class=\"input-title\" *ngIf=\"!input.showControl()\">{{input.name}}></div>\n        <div class=\"input-control\" *ngIf=\"input.showControl()\" [rete-control]=\"input.control\"></div>\n    </div>\n</div>","import { ItemService } from 'src/app/rete-modules/services/item.service';\nimport { Socket } from \"rete\";\nimport { Injectable } from '@angular/core';\n\n@Injectable()\nexport class SocketController {\n  private sockets: Map<number, Socket>;\n\n  constructor(private itemService: ItemService) {\n    this.sockets = new Map();\n  }\n\n  GetSocketForId(id: number): Socket {\n    if (this.sockets.has(id)) {\n      return this.sockets.get(id);\n    }\n    else {\n      this.sockets.set(id, new Socket(this.itemService.GetItemFromId(id).name));\n      return this.sockets.get(id);\n    }\n  }\n}","import { Item } from '../shared/item.model';\nimport { Injectable } from '@angular/core';\n\nexport enum ItemFilter\n{\n  CRAFTABLE,\n  NON_CRAFTABLE,\n  ANY,\n};\n\n@Injectable({\n  providedIn: 'root'\n})\nexport abstract class ItemService {\n  constructor() {\n  }\n\n  public abstract GetAllItems(): Item[];\n  public abstract GetItemFromId(id: number): Item;\n  public abstract GetAllCraftableItems(): Item[];\n  public abstract GetAllNonCraftableItems(): Item[];\n}\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"zn8P\";"],"sourceRoot":"webpack:///"}